# Datakult - Production Deployment
#
# This configuration uses the pre-built image from GitHub Container Registry.
# Perfect for deploying to a server without needing to build the image.
#
# Usage:
#   1. Copy docker/.env.example to .env
#   2. ! Edit .env with your actual values !
#   3. Run: docker compose -f docker/docker-compose.prod.yml up -d

services:
  datakult:
    container_name: datakult
    image: ghcr.io/pascalrepond/datakult:latest
    env_file: .env
    ports:
      - "8000:8000"
    volumes:
      - ./datakult_data:/app/data
    environment:
      # Security
      - SECRET_KEY=${SECRET_KEY:?SECRET_KEY is required}
      - DEBUG=false
      # Allowed hosts - Add your domain and local IP
      # Example: ALLOWED_HOSTS=datakult.example.com,192.168.1.100,localhost
      - ALLOWED_HOSTS=${ALLOWED_HOSTS:-localhost,127.0.0.1}
      # Default superuser (created on first run)
      - DJANGO_SUPERUSER_USERNAME=${DJANGO_SUPERUSER_USERNAME:-admin}
      - DJANGO_SUPERUSER_EMAIL=${DJANGO_SUPERUSER_EMAIL:-admin@example.com}
      - DJANGO_SUPERUSER_PASSWORD=${DJANGO_SUPERUSER_PASSWORD:-admin}
    restart: unless-stopped
