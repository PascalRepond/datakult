{% load i18n %}
{# Filter controls for media list #}
<div class="flex flex-wrap gap-2 items-center" id="filters">
  {# Media type filter #}
  <select name="type"
          id="type"
          class="select select-sm select-bordered"
          hx-get="{% url 'home' %}"
          hx-target="#media-list"
          hx-include="#view-mode-input, #sort, #contributor, #status, #score, #review-from, #review-to"
          hx-push-url="true">
    <option value="">{% translate "All types" %}</option>
    {% for value, label in media_type_choices %}
      <option value="{{ value }}" {% if filters.type == value %}selected{% endif %}>{{ label }}</option>
    {% endfor %}
  </select>
  {# Status filter #}
  <select name="status"
          id="status"
          class="select select-sm select-bordered"
          hx-get="{% url 'home' %}"
          hx-target="#media-list"
          hx-include="#view-mode-input, #sort, #contributor, #type, #score, #review-from, #review-to"
          hx-push-url="true">
    <option value="">{% translate "All statuses" %}</option>
    {% for value, label in status_choices %}
      <option value="{{ value }}" {% if filters.status == value %}selected{% endif %}>{{ label }}</option>
    {% endfor %}
  </select>
  {# Score filter #}
  <select name="score"
          id="score"
          class="select select-sm select-bordered"
          hx-get="{% url 'home' %}"
          hx-target="#media-list"
          hx-include="#view-mode-input, #sort, #contributor, #type, #status, #review-from, #review-to"
          hx-push-url="true">
    <option value="">{% translate "All scores" %}</option>
    {% for value, label in score_choices reversed %}
      <option value="{{ value }}" {% if filters.score == value|stringformat:"d" %}selected{% endif %}>
        {{ value }}‚≠ê - {{ label }}
      </option>
    {% endfor %}
    <option value="none" {% if filters.score == 'none' %}selected{% endif %}>{% translate "Not rated" %}</option>
  </select>
  {# Review date range filter #}
  <div class="flex items-center gap-1">
    <span class="text-sm text-base-content/70">{% translate "Reviewed" %}</span>
    <input type="date"
           name="review_from"
           id="review-from"
           class="input input-sm input-bordered w-36"
           value="{{ filters.review_from }}"
           hx-get="{% url 'home' %}"
           hx-target="#media-list"
           hx-trigger="change"
           hx-include="#view-mode-input, #sort, #contributor, #type, #status, #score, #review-to"
           hx-push-url="true" />
    <span class="text-sm text-base-content/70">{% translate "to" %}</span>
    <input type="date"
           name="review_to"
           id="review-to"
           class="input input-sm input-bordered w-36"
           value="{{ filters.review_to }}"
           hx-get="{% url 'home' %}"
           hx-target="#media-list"
           hx-trigger="change"
           hx-include="#view-mode-input, #sort, #contributor, #type, #status, #score, #review-from"
           hx-push-url="true" />
  </div>
</div>
