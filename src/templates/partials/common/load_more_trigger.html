{% load i18n %}
{% load media_tags %}
{# This partial creates a "Load more" trigger that uses HTMX infinite scroll #}
{% if page_obj.has_next %}
  {% if view_mode == 'grid' %}
    <div id="load-more-trigger"
         hx-get="{% url 'load_more_media' %}?{% query_string request page=page_obj.next_page_number %}"
         hx-trigger="revealed"
         hx-swap="outerHTML"
         class="col-span-full flex justify-center py-4">
      {% include "partials/common/spinner.html" with size="lg" show_text=True text=_("Loading…") inline=True %}
    </div>
  {% else %}
    <tr id="load-more-trigger"
        hx-get="{% url 'load_more_media' %}?{% query_string request page=page_obj.next_page_number %}"
        hx-trigger="revealed"
        hx-swap="outerHTML">
      <td colspan="8" class="text-center py-4">
        {% include "partials/common/spinner.html" with size="lg" show_text=True text=_("Loading…") inline=True %}
      </td>
    </tr>
  {% endif %}
{% endif %}
