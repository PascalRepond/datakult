{% load i18n %}
{% load static %}
<ul class="menu p-4 w-80 min-h-full bg-base-200 text-base-content">
  <!-- Logo/Title at the top -->
  <li class="menu-title">
    <a href="{% url 'home' %}"
       class="flex items-center gap-3 hover:opacity-80 transition-opacity">
      <div class="tooltip tooltip-right" data-tip="Icon by Freepik - Flaticon">
        <img src="{% static 'images/bookshelf.png' %}"
             alt="Datakult logo"
             class="w-8 h-8">
      </div>
      <span class="text-xl font-bold text-primary">Datakult</span>
    </a>
  </li>
  <!-- Main navigation -->
  <li>
    <a href="{% url 'home' %}">
      {% lucide "layers" %}
      {% translate "All" %}
    </a>
  </li>
  <!-- Separator -->
  <li class="menu-title mt-4">
    <span>{% translate "By status" %}</span>
  </li>
  <li>
    <a href="{% url 'home' %}?status=PLANNED"
       class="{% if request.GET.status == 'PLANNED' %} active {% endif %}">
      {% lucide "clock" %}
      {% translate "Planned" %}
    </a>
  </li>
  <li>
    <a href="{% url 'home' %}?status=IN_PROGRESS"
       class="{% if request.GET.status == 'IN_PROGRESS' %} active {% endif %}">
      {% lucide "play" %}
      {% translate "In progress" %}
    </a>
  </li>
  <li>
    <a href="{% url 'home' %}?status=COMPLETED"
       class="{% if request.GET.status == 'COMPLETED' %} active {% endif %}">
      {% lucide "circle-check" %}
      {% translate "Completed" %}
    </a>
  </li>
  <li>
    <a href="{% url 'home' %}?status=PAUSED"
       class="{% if request.GET.status == 'PAUSED' %} active {% endif %}">
      {% lucide "pause" %}
      {% translate "Paused" %}
    </a>
  </li>
  <li>
    <a href="{% url 'home' %}?status=DNF"
       class="{% if request.GET.status == 'DNF' %} active {% endif %}">
      {% lucide "circle-x" %}
      {% translate "Did not finish" %}
    </a>
  </li>
  <!-- Separator for settings -->
  <li class="menu-title mt-4">
    <span>{% translate "Settings" %}</span>
  </li>
  {% if user.is_authenticated %}
    <li>
      <a href="{% url 'accounts:profile_edit' %}">
        {% lucide "circle-user" %}
        {% translate "Profile" %}
      </a>
    </li>
    <li>
      <a href="{% url 'backup_manage' %}">
        {% lucide "download" %}
        {% translate "Backups" %}
      </a>
    </li>
  {% endif %}
  <!-- Theme selector - compact dropdown -->
  <li class="dropdown w-full">
    <div tabindex="0" role="button" class="flex items-center gap-2 w-full">
      {% lucide "sun-moon" %}
      <span>{% translate "Theme" %}</span>
    </div>
    <ul tabindex="0"
        class="dropdown-content menu bg-base-100 rounded-box z-100 w-48 p-2 shadow-xl border border-base-300">
      <li>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="radio"
                 name="theme-sidebar"
                 class="theme-controller radio radio-sm"
                 aria-label="{% translate "System" %}"
                 value="default" />
          <span>{% translate "System" %}</span>
        </label>
      </li>
      <li>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="radio"
                 name="theme-sidebar"
                 class="theme-controller radio radio-sm"
                 aria-label="{% translate "Light" %}"
                 value="datakult-light" />
          <span>{% translate "Light" %}</span>
        </label>
      </li>
      <li>
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="radio"
                 name="theme-sidebar"
                 class="theme-controller radio radio-sm"
                 aria-label="{% translate "Dark" %}"
                 value="datakult-dark" />
          <span>{% translate "Dark" %}</span>
        </label>
      </li>
    </ul>
  </li>
  <!-- Authentication at the bottom -->
  <li class="mt-auto">
    {% if user.is_authenticated %}
      <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit"
                role="button"
                class="flex items-center gap-2 w-full text-left cursor-pointer">
          {% lucide "log-out" %}
          {% translate "Logout" %}
        </button>
      </form>
    {% else %}
      <a href="{% url 'login' %}">
        {% lucide "log-in" %}
        {% translate "Log in" %}
      </a>
    {% endif %}
  </li>
</ul>
